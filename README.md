# site_checker
## Описание
Сервис мониторинга сайтов.

Он должен следить за указанным ресурсом, и считать корректным ответ 200.

В случае ответа отличного от корректного кода отправлять уведомление по смс или
по электронной почте.

Уведомления нужно отправлять после 3, 10, 50, 100 и 500 минут.
Позже уведомлять не стоит.

При выходе ресурса из некорретного состояния отправить сообщение о том, что
ресурс восстановился.

## Настройки(settings.yml):

* **resource** - адрес ресурса для мониторинга
* **minutes** - Минуты, после которых необходимо отправлять уведомления, можно задать свои, количество неограниченно, можно указывать в произвольном порядке
* **extra_messages** - Особые сообщения на определенных минутах(будет отправляться вместо стандартного)
* **pause** - пауза между запросами к ресурсу в минутах(по-умолчанию 1 минута)
* **email** - email для отправки уведомлений
* **email2sms_email** - email сервиса email2sms для отправки sms-ообщений

Должен быть указан хотя бы 1 email(email или email2sms). Чтобы не получать sms или email-сообщения, просто удалите из настроек адрес.

По-умолчанию отправляются сообщения вида 
```
Ресурс #{@url_text} недоступен более #{@last_alert_minutes} минут"
```

Для отправки email-сообщений используется тестовый почтовый ящик на gmail.

Для отправки sms-сообщений используется сервис sms.ru(есть возможность отправки бесплатных смс для тестирования). Чтобы воспользоваться sms на другой номер, необходимо:
* **зарегистрироваться на сервисе sms.ru**
* **в Настройки => Почта @sms.ru => Мои ящики => Настройки** указать "Адрес" и добавить в "E-mail отправителей" добавить почту с которой будет приходить сообщение для сервиса.


**Пока не реализовано**:

* **тесты**
* **развертывание**


## Запуск
Клонируем репозиторий:

```bash
git clone https://github.com/delisher/stie_checker.git
```

Для ручного запуска сервиса из корневой папки проекта следует выполнить:
```bash
gem install bundler
bundler install
ruby site_checker.rb
```